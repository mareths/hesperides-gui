<md-dialog flex="98">
    <md-toolbar>
        <div class="md-toolbar-tools">
            <h2>
                <h3 flex="50"> {{'platform.properties.modal.title' | translate : {platformName:platform.name} }}</h3>
            </h2>
            <div flex="40" class="properties-filter">
                <md-input-container class="filter-block">
                    <label class="filter-label-style">{{ 'properties.filter.byKey' | translate }}</label>
                    <input type="text" class="filter-input-style" ng-trim="true" ng-model="propertiesKeyFilter"
                        aria-label="{{ 'properties.filter.byKey' | translate }}" />
                </md-input-container>
            </div>
            <md-switch ng-model="onlyPropertiesWithBlankFinalValue" class="md-warn md-block"
                aria-label="{{'platform.properties.modal.columnHeaders.switch.message' | translate}}">
                <span class="switch-label-style">{{'platform.properties.modal.columnHeaders.switch.message' | translate}}</span>
            </md-switch>
            
        </div>
    </md-toolbar>
    <md-dialog-content class="dialog-tab"> 
        <table class="table-properties-list">
            <thead class="head-table-properties-list">
                <tr calss="row-head-table-properties-list">
                   <th class="col-tab-titles">
                        {{ 'properties.compare.values.columnHeaders.propertyName' | translate }}
                   </th>
                   <th class="col-tab-titles">
                        {{ 'platform.properties.modal.columnHeaders.nbUsages' | translate }}
                   </th> 
                   <th class="col-tab-titles">
                        {{ 'platform.properties.modal.columnHeaders.finalValue' | translate }}
                   </th>
                   <th class="col-tab-titles">
                        {{ 'platform.properties.modal.columnHeaders.global' | translate }}
                   </th>
                   <th class="col-tab-titles">
                        {{ 'platform.properties.modal.columnHeaders.moduleValue' | translate }}
                   </th>
                   <th class="col-tab-titles">
                        {{ 'platform.properties.modal.columnHeaders.annotations' | translate }}
                   </th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="property in properties.key_value_properties | filter: propertyWIthBlankFinalValueFilter | filter: {'name': propertiesKeyFilter}">
                    <td class="col-tab-properties-datas">
                        <div  ng-attr-class="{{isGlobalValuationIsDiffrentWithModuleValuation(property) && 'fa-colored' || 'fa-not-colored' }}">                      
                            <div class="text-container">
                                <label class="property-label-class"> {{property.name}}</label>
                                <md-tooltip md-direction="left">
                                    {{property.name}}
                                </md-tooltip>
                            </div>
                        </div>
                    </td>
                    <td class="col-tab-properties-datas">
                        <div class="properties-values" >
                            {{getModulesWherePropertyUsed(property)}}
                        </div>
                    </td>
                    <td class="col-tab-properties-datas">
                        <div
                            ng-attr-class="{{isGlobalValuationIsDiffrentWithModuleValuation(property) && 'fa-colored' || 'fa-not-colored' }}"
                            class="properties-values">
                            {{property.finalValue}}
                        </div>
                    </td>
                    <td class="col-tab-properties-datas">
                        <div layout="column">
                            <div flex="60">
                                <div class="text-container" ng-if="(platform.globalPropertyUsages[property.name] | filter : {inModel:'true'}).length">
                                    <label class="property-label-class">{{property.name}}</label>
                                    <md-tooltip md-direction="left">
                                        {{property.name}}
                                    </md-tooltip>
                                </div>
                            </div>
                            <div flex="10" ng-init="zoomInGlobalProperties = false">
                                <div layout="column" layout-wrap>
                                    <span id="properties-globales_zoom-{{property.name}}" flex class="ng-scope zoom-in-property-icon"
                                          ng-class="zoomInGlobalProperties ? 'fa fa-compress' : 'fa fa-expand'"
                                          ng-click="zoomInGlobalProperties = !zoomInGlobalProperties"
                                          ng-show="(platform.globalPropertyUsages[property.name] | filter : {inModel:'true'}).length">
                                    </span>
                                </div>
                            </div>
                            <div flex="30">
                                <span ng-show="zoomInGlobalProperties" ng-bind="'properties.platform.globalProperties.used_in' | translate"></span>
                            </div>
                            <div ng-show="zoomInGlobalProperties && (platform.globalPropertyUsages[property.name] | filter : {inModel:'true'}).length">
                                <md-list flex="auto"class="global-property-usage">
                                    <md-list-item ng-repeat="usage in (platform.globalPropertyUsages[property.name] | filter : {inModel:'true'}) track by $index">
                                        <div class="text-container">
                                            <label id="properties-globales_platform-prettyfy-path-label-{{property.name}}" class="global-property-usage-label">{{platform.prettify_path(usage.path)}}</label>
                                        </div>
                                    </md-list-item>
                                </md-list>
                            </div>
                        </div>
                    </td>
                    <td class="col-tab-properties-datas">
                        <div ng-attr-class="{{isGlobalValuationIsDiffrentWithModuleValuation(property) && 'fa-colored' || 'fa-not-colored' }}">
                            <div class="text-container">
                                <label class="properties-values">{{property.storedValue}}</label>
                                <md-tooltip md-direction="left">
                                    {{property.storedValue}}
                                </md-tooltip>
                            </div>
                        </div>
                    </td>
                    <td class= "col-tab-properties-datas">
                        <div class="properties-values">
                            <div flex="80" class="row">
                                <div>
                                    <span
                                        ng-if="property.required">{{'platform.properties.modal.columnHeaders.annotations.required'| translate : {requiredValue:property.required} }}</span>
                                    <span
                                        ng-if="property.pattern && property.pattern !==''">{{'platform.properties.modal.columnHeaders.annotations.pattern' | translate : {patternValue:property.pattern} }}</span>
                                    <span
                                        ng-if="property.password">{{'platform.properties.modal.columnHeaders.annotations.password'| translate : {passwordValue:property.password} }}</span>
                                    <span
                                        ng-if="property.comment">{{'platform.properties.modal.columnHeaders.annotations.comment' | translate : {commentValue:property.comment} }}</span>
                                    <span
                                        ng-if="property.defaultValue">{{'platform.properties.modal.columnHeaders.annotations.default' | translate : {defaultValue:property.defaultValue} }}</span>
                                </div>
                            </div>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table> 
    </md-dialog-content>
    <md-dialog-actions class="dialog-actions" layout="row">
        <md-button ng-click="closeDialog()" class="md-raised md-primary">
            {{'platform.properties.modal.button.message'| translate }}</md-button>
    </md-dialog-actions>
</md-dialog>
